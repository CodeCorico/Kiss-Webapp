!function(){"use strict";$.extend($.expr[":"],{attrStartsWith:function(n,t,e){for(var i=0,o=n.attributes,r=o.length;r>i;i++)if(0===o[i].nodeName.indexOf(e[3]))return!0;return!1}});var n=function(n,t,e,i){function o(n,t,e,i){if(i=i||0,t=0===i?t.split("."):t,"undefined"!=typeof e&&i<t.length-1&&"object"!=typeof n[t[i]]&&(n[t[i]]={}),"undefined"!=typeof n[t[i]]||"undefined"!=typeof e){if(i===t.length-1){if("undefined"!=typeof e){var r=n[t[i]];return n[t[i]]=e,{namespace:t,oldValue:r,value:n[t[i]]}}return n[t[i]]}return o(n[t[i]],t,e,i+1)}}function r(n,t){n=n.jquery?n.get(0):n;var e="pl-collection-";$.each(n.attributes,function(){this.specified&&this.name.length>e.length&&0===this.name.indexOf(e)&&t.call({name:this.name.substr(e.length,this.name.length-e.length),value:this.value})})}function l(n,t){var e;return e=i.find(n).not(i.attr("pl-component")?"[pl-component] [pl-component] "+n:"[pl-component] "+n),t&&i.is(n)&&(e=e.add(i)),e}function c(e,i,o){o=o||{};var r={};$.each(o,function(){"undefined"!=typeof i[this.from]&&(r[this.to]=n.extendEverything(i[this.from]))}),t.open(e,r)}function a(n,t,e){n[t].call(d,function(){return t<n.length-1?a(n,++t,e):void(e&&e())})}function u(i){i.each(function(){var i=$(this);new n.List(n,t,e,d,i).compile()})}function s(){$.each(k,function(){this.link()})}function h(i,o,r){return r=r||0,r<i.length?void new n.Component(n,t,e,$(i.get(r))).compile(function(){h(i,o,++r)}):void(o&&o())}function f(n){return n=(n+":").split(":"),{key:n[0],converter:n.length>1?n[1]:null}}window.EventsManager.call(this);var p="collection-",d=this,v=null,m=null,g="",y=null,w=null,b={},k=[],x=[];this.el={},this.name=function(){return v},this.app=function(){return t},this.page=function(){return e},this.template=function(n){return"undefined"!=typeof n&&(g=n),g},this.templateSrc=function(n){return"undefined"!=typeof n&&(y=n),y},this.controllers=function(n){return"undefined"!=typeof n&&(w=n),w},this.keysBinded=function(){return x},this.collection=function(n,t){if("undefined"==typeof n)return m;if("undefined"==typeof t)return o(m,n);var e=o(m,n,t);if(e.oldValue!=e.value){var i,r=[];for(i=0;i<e.namespace.length;i++)r.push(e.namespace[i]),d.fire(p+r.join("/"),{value:o(m,r.join("."))});r=p+r.join("/")+"/";var l=d.eventsName();for(i=0;i<l.length;i++){var c=l[i];if(c.length>r.length&&0===c.indexOf(r)){var a=c.substr(p.length,c.length-p.length).replace(/\//g,".");d.fire(c,{value:o(m,a)})}}}return this},this.bind=function(n,t){var e=n.split(".")[0];return $.inArray(e,x)<0&&x.push(e),n=n.replace(/\./g,"/"),d.on("collection."+p+n,function(n){t.call(d,n.value)}),d},this.compile=function(t){if(!g){y=y?y:i.attr("pl-component-src");var o=n.theme();if(o){var l=i.attr("pl-component-src-"+o);y=l?l:y}return n.registerTemplate(y,function(n){g=n,d.compile(t)}),d}if(i&&i.attr("pl-component-src")){var c=[];r(i,function(){c.push(this)}),i.html(g);var a=i.find("[pl-component]");i.replaceWith(a),i=a,v=i.attr("pl-component"),$.each(c,function(){i.attr("pl-collection-"+this.name,this.value)}),e.registerComponent(d)}else i=$($("<div />").html(g).children().get(0));return u(i.find("[pl-list]")),h(i.find("[pl-component-src]"),function(){t&&t()}),d},this.link=function(t,o){m=t||{},i.attr("pl-component")&&r(i,function(){var n=this;e.bind(n.value,function(t){d.collection(n.name,t)}),d.collection(n.name,e.collection(n.value))}),l(':attrStartsWith("pl-attr-")',!0).each(function(){var n=$(this),t="pl-attr-",e=!1,i=!1;$.each(this.attributes,function(){this.specified&&this.name.length>t.length&&0===this.name.indexOf(t)&&(e=this.name.substr(t.length,this.name.length-t.length),i=f(this.value))}),e&&i&&d.bind(i.key,function(t){i.converter&&(t=d.convert(i.converter,t)),n.attr(e,t)})}),l("[pl-html]").each(function(){var n=$(this),t=f(n.attr("pl-html"));d.bind(t.key,function(e){t.converter&&(e=d.convert(t.converter,e)),n.html(e+"")})}),v&&(d.el[v]=i),l("[pl-element]").each(function(){var n=$(this),t=n.attr("pl-element");d.el[t]=n}),l("[pl-nav-page]").each(function(){var n=$(this),i=n.attr("pl-nav-page"),o=[];r(this,function(){o.push({from:this.value,to:this.name})}),n.click(function(){var n=0,r=e.fire("nav-"+i,{collection:t,callback:function(t){setTimeout(function(){n++,n>=r&&c(i,t,o)})}}).length;r||c(i,d.collection(),o)})}),l("[pl-bind]").each(function(){var n=$(this),t=f(n.attr("pl-bind")),e=(n.attr("type")||"").toLowerCase(),i=n.get(0).tagName.toLowerCase();"button"==i||"input"==i&&("button"==e||"submit"==e)?n.bind("click",function(){d.collection(t.key,(d.collection(t.key)||0)+1)}):"input"==i||"textarea"==i?(d.bind(t.key,function(e){t.converter&&(e=d.convert(t.converter,e)),n.val(e+"")}),n.bind("propertychange change click keyup input paste",function(){d.collection(t.key,n.val())})):"form"==i&&n.submit(function(n){n.preventDefault(),d.collection(t.key,(d.collection(t.key)||0)+1)})}),$.each(m,function(t,e){d.collection(t,n.extendEverything(e))});var u=w?w:v?n.component(v).controllers:[];return u.length?a(u,0,function(){s(),d.fire("linked"),o&&o(i)}):(s(),d.fire("linked"),void(o&&o(i)))},this.destroy=function(n){return n?(d.on("destroy",function(){n.call(d)}),d):(d.fire("destroy"),d)},this.dom=function(){return i},this.converter=function(n,t){return b[n]=b[n]||null,"function"==typeof t&&(b[n]=t),b[n]},this.convert=function(t,o){var r=d.converter(t);return!r&&i.attr("pl-component")&&(r=e.converter(t)),r||(r=n.converter(t)),r?r.call(this,o):o},this.registerList=function(n){k.push(n)}};window.Plumes=window.Plumes||{},window.Plumes.Component=n}(),function(){"use strict";var n=function(n,t,e,i,o){function r(n,t){return typeof n!=typeof t?!1:"object"!=typeof n&&n!==t?!1:"object"==typeof n&&$.param(n)!=$.param(t)?!1:!0}function l(t,e){$.each(p,function(){this.collection(t,n.extendEverything(e))})}function c(t){$.each(t,function(){var t=this;"$index"!=t&&"$length"!=t&&t!=g&&($.inArray(t,v)<0&&(v.push(t),i.bind(t,function(n){l(t,n)})),l(t,n.extendEverything(i.collection(t))))})}function a(i,r,l){var u=new n.Component(n,t,e,null);p.push(u),u.template(d),u.compile(function(){u.link({},function(n){return o.append(n),b&&n.css({position:"absolute",top:0,left:0,width:"100%"}),c(u.keysBinded()),i--,1>i?void(r&&r.apply(f,l||[])):void a(i,r,l)})})}function u(n,t,e){for(var i=0;n>i;i++){var r=p.pop();r.destroy(),o.children().last().remove()}t&&t.apply(f,e||[])}function s(t,e){if(b){var i=o.parent(),r=i.get(0),l="undefined"!=typeof r.pageYOffset?r.pageYOffset:r.scrollTop,c=Math.ceil(i.height()/b.itemHeight)+1;if(t){if(c=c.length>t.length?t.length:c,c>p.length)return a(c-p.length,s,[t,e]);if(c<p.length)return u(c-t.length,s,[t,e])}c=c>p.length?p.length:c;var h=Math.floor(l/b.itemHeight);o.children().each(function(t){var i=$(this),o=p[t],r=t+h,c=w[r];c?(e&&o.collection("$length",w.length),o.collection("$index")!=r&&o.collection("$index",r),o.collection(g,n.extendEverything(c)),i.css("display","")):i.css("display","none"),i.css("top",l+t*b.itemHeight-l%b.itemHeight)})}}function h(t,e){if(w=t||[],e="undefined"==typeof e?w.length!=p.length:e,b)o.css("height",b.itemHeight*w.length),s(w,e);else{if(w.length>p.length)return a(w.length-p.length,h,[w,e]);if(w.length<p.length)return u(p.length-w.length,h,[w,e]);$.each(w,function(t){var i=p[t];e&&i.collection("$length",w.length),i.collection("$index")!=t&&i.collection("$index",t);var o=i.collection(g);r(this,o)||i.collection(g,n.extendEverything(this))})}}window.Plumes.Component.call(this);var f=this,p=[],d="",v=[],m=null,g=null,y=null,w=[],b=o.attr("virtualization");b=b?$.extend(!0,{itemHeight:1},$.parseJSON(b)):null,this.compile=function(){var n=o.attr("pl-list").split(" in ");if(g=n[0],y=n[1].split(":"),m=y[0],y=y.length>1?y[1]:null,d=o.html().replace(/({{(.*?)}})/g,'<span pl-html="$2"></span>'),o.html(""),b){var t=$("<div />");$.each(o.get(0).attributes,function(n,e){"pl-list"!=e.nodeName&&"virtualization"!=e.nodeName&&t.attr(e.nodeName,e.nodeValue)}),o.replaceWith(t),t.append(o),o.css({position:"relative",height:"auto",margin:0,padding:0}),t.css("overflow","auto"),t.scroll(s)}i.registerList(f)},this.link=function(){i.bind(m,function(n){y&&(n=i.convert(y,n||[])),h(n)});var n=i.collection(m);y&&(n=i.convert(y,n||[])),h(n)},b&&$(window).resize(function(){s()})};window.Plumes=window.Plumes||{},window.Plumes.List=n}(),function(){"use strict";var n=function(n,t,e){var i=this,o=e.attr("pl-page"),r=[],l=e.attr("src"),c=[],a=n.theme(),u=null;if(a){var s=e.attr("src-"+a);l=s?s:l}return"script"==e.get(0).tagName.toLowerCase()&&o&&l?(n.Component.call(this,n,t,this,e),this.templateSrc(l),this.name=function(){return o},this.controller=function(n){r.push(n),i.controllers(r)},this.beforeNav=function(n,t){i.on("nav.nav-"+n,function(n){return t.call(this,n.collection,n.callback),!0})},this.registerComponent=function(n){c.push(n)},this.referer=function(n){u=n},void this.on("linked",function(){$.each(c,function(){this.link()})})):(console.error('Error: Page format needs to be SCRIPT node with "pl-page" and "src" attributes.'),!1)};window.Plumes=window.Plumes||{},window.Plumes.Page=n}(),function(){"use strict";var n=function(n,t){function e(){setTimeout(function(){for(var n=0;n<s.length;n++)s[n]();return a&&l[a]&&l[a].name?l.open(a):void 0})}function i(){t.find("[pl-page]").each(function(){var t=$(this),e=new n.Page(n,l,t);if(e){var i=e.name();if(l[i])return void console.error('Error: "'+i+'" word reserved for Page name.');l[i]=e}}),e()}function o(){p&&n.on("hashChanged",function(n){n.hash=parseInt(n.hash||0,10);var t=d.length?d.length-1:null,e=d[n.hash];if(t!=n.hash&&e){for(;d.length>n.hash+1;)d.pop();l.open(e.page,$.extend(!0,{},e.collection),!1)}})}function r(){t.children().each(function(n){n>=h&&$(this).remove()})}window.EventsManager.call(this);var l=this,c=t.attr("plumes")||null,a=t.attr("index")||null,u=!1,s=[],h=0,f=null,p=t.attr("history")||null,d=[];return p=p&&"false"==p?!1:!0,c?(this.name=function(){return c},this.init=function(){i(),o(),h=t.children().length},this.ready=function(n){return u?void n.call(this):void s.push(n)},this.open=function(n,e,i,o){if(e=e||{},i="undefined"==typeof i?!0:i,!l[n]||!l[n].name)return console.error('Error: "'+n+'" is not a page of '+c+"."),!1;var a=f?f:null;f=n;var u=l[f];u.compile(function(){u.referer(a,e),p&&i&&(d.push({page:f,collection:$.extend(!0,{},e)}),window.location.hash=1===d.length?"":d.length-1),u.link(e,function(n){a&&l[a].destroy(),r(),t.append(n),o&&o()})})},void(this.pageActive=function(){return f})):(console.error('Error: App format needs to have "plumes" not empty attribute.'),!1)};window.Plumes=window.Plumes||{},window.Plumes.App=n}(),function(){"use strict";var n=function(){function n(n){if(n=n||!1,o++,n||o>=r){i=!0;for(var t=0;t<l.length;t++)l[t].call(e)}}function t(){var n=location.href.replace(/^[^#]*#?(.*)$/,"$1");n!==f&&(e.fire("hashChanged",{oldHash:f,hash:n}),f=n),setTimeout(t,50)}window.EventsManager.call(this);var e=this,i=!1,o=0,r=0,l=[],c={},a={},u={},s=null,h=0,f=null;this.extendEverything=function(n){if("undefined"!=typeof n){if($.isPlainObject(n)&&n)return $.extend(!0,{},n);if($.isArray(n))return $.extend(!0,[],n)}return n},this.init=function(){t(),$("[plumes]").each(function(){var t=new e.App(e,$(this));if(t){var i=t.name();if(e[i])return void console.error('Error: "'+i+'" word reserved for App name.');t.ready(function(){n()}),e[i]=t,r++,t.init()}})},this.ready=function(n){return i?void n.call(e):void l.push(n)},this.registerTemplate=function(n,t){if(a[n])return void(t&&t(a[n]));var e=$("<div />");e.load(n+"?_t="+(new Date).getTime()+ ++h,function(){a[n]=e.html().replace(/({{(.*?)}})/g,'<span pl-html="$2"></span>'),t&&t(a[n])})},this.component=function(n,t){return c[n]=c[n]||{controllers:[]},"function"==typeof t&&c[n].controllers.push(t),c[n]},this.converter=function(n,t){return u[n]=u[n]||null,"function"==typeof t&&(u[n]=t),u[n]},this.theme=function(n){return"string"==typeof n&&(s=n),s}},t=new n;if(window.Plumes){var e;for(e in window.Plumes)t[e]=window.Plumes[e]}window.Plumes=t}(),$(function(){"use strict";window.Plumes.init()});
//# sourceMappingURL=plumes-full.min.js.map