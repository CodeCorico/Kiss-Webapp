<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Plumes - Examples - Pages</title>
    <link rel="stylesheet" type="text/css" href="./assets/examples.css">
  </head>
  <body plumes="ExamplePages" index="home">
    <script type="text/html" pl-page="home" src="./pages/page-home.html"></script>
    <script type="text/html" pl-page="user" src="./pages/page-user.html"></script>

    <script type="text/javascript" src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="../src/vendor/events-manager/events-manager.js"></script>
    <script type="text/javascript" src="../src/plumes-page.js"></script>
    <script type="text/javascript" src="../src/plumes-app.js"></script>
    <script type="text/javascript" src="../src/plumes.js"></script>
    <script type="text/javascript">
      $(function() {
        'use strict';

        window.Plumes.ready(function() {
          console.log('Ready!');

          this.ExamplePages.home.controller(function(next) {
            console.log('Load Home page');

            var _this = this;

            this
              .bind('hello', function(value, oldValue) {
                console.log('[hello] old:', oldValue, ', value:', value);
              })
              .bind('buttonTest', function(event) {
                console.log('[buttonTest] click', event);
              })
              .bind('user', function(value, oldValue) {
                console.log('[user] old:', oldValue, ', value:', value);
              })
              .bind('userSubmit', function(event) {
                console.log('[userSubmit] submit', event);
              });
            //   .beforeNav('user', function(collection, callback) {

            //     callback(collection);
            //   });

            this
              .collection('hello', 'Hello world!')
              .collection('user', 'Xavier');

            setTimeout(function() {
              _this.collection('hello', 'OK OK OK');
            }, 2000);

            // this.el.inputUser.css('background', 'blue');

            console.log('Home page has', this.DOM().children().length, 'children');

            next();
          });
        });
      });
    </script>
  </body>
</html>
